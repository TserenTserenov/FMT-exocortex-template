# Обслуживание экзокортекса (CLAUDE.md + Memory)

## Архитектура

| Слой | Файл | Лимит | Загрузка |
|------|------|-------|----------|
| 1 | MEMORY.md | ≤100 строк | Авто (всегда) |
| 2 | {{WORKSPACE_DIR}}/CLAUDE.md | ≤300 строк | Авто (всегда) |
| 3 | memory/*.md | ≤10 файлов, ≤100 строк каждый | По ссылкам |

## Что куда добавлять

| Контент | Куда |
|---------|------|
| Новый протокол (Open/Work/Close) | CLAUDE.md § 2 |
| Новое различение (1-3 строки) | CLAUDE.md (компактно) |
| Новое жёсткое различение | memory/hard-distinctions.md |
| Правило для типа репо | memory/repo-type-rules.md |
| Урок (кросс-системный) | memory/<topic>.md |
| Урок (одна система) | <repo>/CLAUDE.md |
| Новый процесс/сценарий | PROCESSES.md (DS-ecosystem-development или repo) |

## Backup

На Close и Day-Close: `memory/*.md + {{WORKSPACE_DIR}}/CLAUDE.md → DS-strategy/exocortex/`

## Иерархия заголовков

- `##` — секции (1. Архитектура, 2. Стадии сессии, ...)
- `###` — протоколы/подсекции (Open, Work, Close)
- `####` — подшаги внутри протокола (2.2, 2.3, ...)
